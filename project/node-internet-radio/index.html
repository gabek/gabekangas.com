<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=description content="Get internet radio stream details via Node.js."><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="node-internet-radio"><meta name=twitter:description content="Get internet radio stream details via Node.js."><meta property="og:title" content="node-internet-radio"><meta property="og:description" content="Get internet radio stream details via Node.js."><meta property="og:type" content="article"><meta property="og:url" content="https://gabekangas.com/project/node-internet-radio/"><title>node-internet-radio · Gabe Kangas</title><link rel=canonical href=https://gabekangas.com/project/node-internet-radio/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.1.7" as=font type=font/woff2 integrity="sha256-hEIt6X6xzye8ubyk8/uxjz68cRZHsJxoKS9fQ8idUGQ=" crossorigin><link rel=stylesheet href=/css/coder.min.ec198d25949ddd79a670b1ead43ca88e0bc2c1343266d0df0a9eeb7f3f207777.css integrity="sha256-7BmNJZSd3XmmcLHq1DyojgvCwTQyZtDfCp7rfz8gd3c=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.89c82b6022b96f77aeb521b240daec4f87ea029d84d1c78b8acd0735b91b3c92.css integrity="sha256-icgrYCK5b3eutSGyQNrsT4fqAp2E0ceLis0HNbkbPJI=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=alternate type=text/gemini href=/gemini/project/node-internet-radio/index.gmi title="Gabe Kangas"><meta name=generator content="Hugo 0.74.2"></head><body class=colorscheme-dark><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Gabe Kangas</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/blog/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://github.com/gabek>GitHub</a></li><li class=navigation-item><a class=navigation-link href=https://owncast.online>Owncast</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://gabekangas.com/project/node-internet-radio/>node-internet-radio</a></h1></header><p>Node.js module to get Now Playing information from an internet radio stream in the form of the following object:</p><pre><code>{ listeners: '89',
  bitrate: '128',
  title: 'Die Antwoord - I Fink U Freaky',
  fetchsource: 'SHOUTCAST_V1' }
</code></pre><p>The syntax is simple:</p><pre><code>getStationInfo(url, callback, [method]);
</code></pre><h2 id=install>Install
<a class=heading-link href=#install><i class="fa fa-link" aria-hidden=true></i></a></h2><pre><code>npm install node-internet-radio
</code></pre><p>This Node.js module supports three different methods to fetch the station details of an internet radio stream.
All but fetching details from the raw audio stream give you the currently playing track, bitrate, and listener count.</p><table><thead><tr><th>Method</th><th>StreamSource</th><th>Track</th><th>Bitrate</th><th>Listeners</th><th>Headers</th></tr></thead><tbody><tr><td>Shoutcast V1</td><td>StreamSource.SHOUTCAST_V1</td><td>✓</td><td>✓</td><td>✓</td><td>X</td></tr><tr><td><a href=http://wiki.shoutcast.com/wiki/SHOUTcast_DNAS_Server_2_XML_Reponses>Shoutcast V2</a></td><td>StreamSource.SHOUTCAST_V2</td><td>✓</td><td>✓</td><td>✓</td><td>X</td></tr><tr><td><a href=http://icecast.org/docs/icecast-2.4.1/server-stats.html>Icecast</a></td><td>StreamSource.ICECAST</td><td>✓</td><td>✓</td><td>✓</td><td>X</td></tr><tr><td><a href=http://www.smackfu.com/stuff/programming/shoutcast.html>Raw Stream (icy metadata)</a></td><td>StreamSource.STREAM</td><td>✓</td><td>X</td><td>X</td><td>✓</td></tr><tr><td>Radionomy Scraping</td><td>StreamSource.RADIONOMY</td><td>✓</td><td>X</td><td>X</td><td>X</td></tr></tbody></table><h2 id=examples>Examples
<a class=heading-link href=#examples><i class="fa fa-link" aria-hidden=true></i></a></h2><p>If you have an audio stream and don&rsquo;t know what approach to take then simply omit the last <strong>method</strong> parameter
and it will use all available options and return the first one that completes. At the very least the <em>stream</em> method
will return something from a valid stream, but it will not support the Bitrate and Listener count.</p><pre><code>var internetradio = require('node-internet-radio');
var testStream = &quot;http://23.27.51.2:6699&quot;;
internetradio.getStationInfo(testStream, function(error, station) {
  console.log(station);
});
</code></pre><p>While this approach is easy, it&rsquo;s not efficient. You should not be hitting invalid resources and slurping down the raw audio feed each time if you don&rsquo;t need to.</p><p>The approach you should take is to find out what source method you want to utilize, cache it, and then only use that going forward. Think about going through each method in order
of preference (probably V1, V2, Icecast, Stream) and take note of that for next time.</p><p>To fetch the station details using a specific method simply pass it as the last argument using one of the <strong>StreamSource</strong> constants above.</p><pre><code>internetradio.getStationInfo(&quot;http://coolstream.net/&quot;, function(error, station) {
  console.log(station);
}, internetradio.StreamSource.SHOUTCAST_V1);
</code></pre><h2 id=radionomy-support>Radionomy Support
<a class=heading-link href=#radionomy-support><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Because Radionomy begins an ad each time you connect directly to the audio stream you&rsquo;ll never know what is actually playing.
Because of this the option of Radionomy.com scraping to get the track name has been added. This is likely to break in the future any time
Radionomy updates their web site.</p><h2 id=server-headers>Server headers
<a class=heading-link href=#server-headers><i class="fa fa-link" aria-hidden=true></i></a></h2><p>If you are interested in the server headers instead of just the now-playing information use <strong>StreamSource.STREAM</strong> and you&rsquo;ll get the server headers from the stream.</p><pre><code>{ title: 'Tosca - Zuri',
  fetchsource: 'STREAM',
  headers:
   { 'icy-br': '128',
     'icy-genre': 'Ambient Chill',
     'icy-name': 'Groove Salad',
     'icy-notice1': '&lt;BR&gt;This stream requires &lt;a href=&quot;http',
     'icy-notice2': 'SHOUTcast Distributed Network Audio Server/Linux v1.9.5&lt;BR&gt;',
     'icy-pub': '0',
     'icy-metaint': '45000' } }
</code></pre></article></section></div><footer class=footer><section class=container><p>I simplified my website. It's better this way.</p></section></footer></main></body></html>